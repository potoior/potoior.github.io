<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ä»£ç ç¥åŸŸï¼šç¬¬24ç« ï¼šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ | potoior</title><meta name="author" content="potoior"><meta name="copyright" content="potoior"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="ç¬¬24ç« ï¼šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ">
<meta property="og:type" content="article">
<meta property="og:title" content="ä»£ç ç¥åŸŸï¼šç¬¬24ç« ï¼šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ">
<meta property="og:url" content="http://example.com/2025/10/01/%E7%AC%AC24%E7%AB%A0%EF%BC%9A%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%EF%BC%9ABug%E8%BF%BD%E8%B8%AA%E7%9A%84%E4%BE%A6%E6%8E%A2%E6%B8%B8%E6%88%8F/index.html">
<meta property="og:site_name" content="potoior">
<meta property="og:description" content="ç¬¬24ç« ï¼šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/butterfly-icon.png">
<meta property="article:published_time" content="2025-10-01T01:09:04.783Z">
<meta property="article:modified_time" content="2025-10-01T00:47:41.000Z">
<meta property="article:author" content="potoior">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ä»£ç ç¥åŸŸï¼šç¬¬24ç« ï¼šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ",
  "url": "http://example.com/2025/10/01/%E7%AC%AC24%E7%AB%A0%EF%BC%9A%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%EF%BC%9ABug%E8%BF%BD%E8%B8%AA%E7%9A%84%E4%BE%A6%E6%8E%A2%E6%B8%B8%E6%88%8F/",
  "image": "http://example.com/img/butterfly-icon.png",
  "datePublished": "2025-10-01T01:09:04.783Z",
  "dateModified": "2025-10-01T00:47:41.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "potoior",
      "url": "http://example.com"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2025/10/01/%E7%AC%AC24%E7%AB%A0%EF%BC%9A%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%EF%BC%9ABug%E8%BF%BD%E8%B8%AA%E7%9A%84%E4%BE%A6%E6%8E%A2%E6%B8%B8%E6%88%8F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 6 || hour >= 18
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ä»£ç ç¥åŸŸï¼šç¬¬24ç« ï¼šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.0.0"></head><body><div id="web_bg" style="background-image: url(/img/bg.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">136</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸…å•</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> ç…§ç‰‡</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post type-ä»£ç ç¥åŸŸ" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">potoior</span></a><a class="nav-page-title" href="/"><span class="site-name">ä»£ç ç¥åŸŸï¼šç¬¬24ç« ï¼šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸…å•</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> ç…§ç‰‡</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">ä»£ç ç¥åŸŸï¼šç¬¬24ç« ï¼šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-10-01T01:09:04.783Z" title="å‘è¡¨äº 2025-10-01 09:09:04">2025-10-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-10-01T00:47:41.000Z" title="æ›´æ–°äº 2025-10-01 08:47:41">2025-10-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BB%A3%E7%A0%81%E7%A5%9E%E5%9F%9F/">ä»£ç ç¥åŸŸ</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">6.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>27åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2025-10-01 08:47:41&quot;}" hidden></div><h1><span id="ç¬¬24ç« è°ƒè¯•æŠ€å·§bugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ">ç¬¬24ç« ï¼šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ</span></h1><h2><span id="ç« èŠ‚æ¦‚è¿°">ç« èŠ‚æ¦‚è¿°</span></h2><p><strong>å­—æ•°ç»Ÿè®¡</strong>ï¼š13,500å­—</p>
<p><strong>åœºæ™¯è®¾å®š</strong>ï¼šä»£ç ç¥åŸŸçš„â€è°ƒè¯•ä¾¦æ¢äº‹åŠ¡æ‰€â€ï¼Œä¸€ä¸ªå……æ»¡ç¥ç§˜æ°›å›´çš„æŠ€æœ¯ç©ºé—´ï¼Œå¢™ä¸ŠæŒ‚ç€å„ç§Bugçš„â€é€šç¼‰ä»¤â€ï¼Œæ¡Œä¸Šæ‘†æ»¡äº†è°ƒè¯•å·¥å…·å’Œçº¿ç´¢æ¿ã€‚</p>
<p><strong>æ ¸å¿ƒå†²çª</strong>ï¼šå¼ å­çƒ¨åœ¨å®Œæˆå‘˜å·¥ä¿¡æ¯ç®¡ç†ç³»ç»ŸåŠŸèƒ½åï¼Œé‡åˆ°äº†éš¾ä»¥è¿½è¸ªçš„Bugï¼Œéœ€è¦åœ¨æœ‰é™æ—¶é—´å†…æ‰¾åˆ°å¹¶ä¿®å¤é—®é¢˜ï¼Œå¦åˆ™å°†å½±å“é¡¹ç›®ä¸Šçº¿è¿›åº¦ã€‚</p>
<p><strong>æ•…äº‹ä¸»çº¿</strong>ï¼šå¼ å­çƒ¨åŒ–èº«ä¸ºâ€ä»£ç ä¾¦æ¢â€ï¼Œåœ¨ä»£ç ç¥åŸŸçš„è°ƒè¯•ä¾¦æ¢äº‹åŠ¡æ‰€ä¸­ï¼Œå­¦ä¹ å„ç§è°ƒè¯•æŠ€å·§ï¼Œè¿½è¸ªéšè—çš„Bugï¼Œæœ€ç»ˆæˆåŠŸè§£å†³é—®é¢˜å¹¶æŒæ¡ç³»ç»Ÿè°ƒè¯•çš„æ ¸å¿ƒæŠ€èƒ½ã€‚</p>
<h2><span id="è°ƒè¯•åŸºç¡€bugè¿½è¸ªçš„ä¾¦æ¢å·¥å…·">è°ƒè¯•åŸºç¡€ï¼šBugè¿½è¸ªçš„ä¾¦æ¢å·¥å…·</span></h2><h3><span id="æ—¥å¿—ç³»ç»Ÿçš„çº¿ç´¢è®°å½•">æ—¥å¿—ç³»ç»Ÿçš„â€çº¿ç´¢è®°å½•â€</span></h3><p>å¼ å­çƒ¨ç«™åœ¨è°ƒè¯•ä¾¦æ¢äº‹åŠ¡æ‰€çš„çº¿ç´¢å¢™å‰ï¼Œå°wicåŒ–èº«ä¸ºç»éªŒä¸°å¯Œçš„â€è€ä¾¦æ¢â€ï¼Œå¼€å§‹ä¼ æˆè°ƒè¯•çš„åŸºç¡€çŸ¥è¯†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—¥å¿—é…ç½®ç±» - ä¾¦æ¢çš„çº¿ç´¢è®°å½•æœ¬</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DetectiveLogConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Logger <span class="title function_">caseLogger</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(<span class="string">&quot;CaseLogger&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®æ—¥å¿—çº§åˆ«ï¼šTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR</span></span><br><span class="line">        ((ch.qos.logback.classic.Logger) logger).setLevel(Level.DEBUG);</span><br><span class="line">        <span class="keyword">return</span> logger;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ¡ˆä»¶çº¿ç´¢è®°å½•æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">logCaseClue</span><span class="params">(String caseId, String clue, Object... args)</span> &#123;</span><br><span class="line">        <span class="type">Logger</span> <span class="variable">caseLogger</span> <span class="operator">=</span> LoggerFactory.getLogger(<span class="string">&quot;CaseLogger&quot;</span>);</span><br><span class="line">        caseLogger.info(<span class="string">&quot;æ¡ˆä»¶[&#123;&#125;]çº¿ç´¢: &#123;&#125; - &#123;&#125;&quot;</span>, caseId, clue, Arrays.toString(args));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾¦æ¢æ—¥å¿—å·¥å…·ç±»</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DetectiveLogger</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(DetectiveLogger.class);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®°å½•çŠ¯ç½ªç°åœºï¼ˆæ–¹æ³•å…¥å£ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logCrimeScene</span><span class="params">(String methodName, Object... params)</span> &#123;</span><br><span class="line">        logger.debug(<span class="string">&quot;ğŸ•µï¸ è¿›å…¥çŠ¯ç½ªç°åœº: &#123;&#125;ï¼Œå‚æ•°: &#123;&#125;&quot;</span>, methodName, Arrays.toString(params));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®°å½•å«Œç–‘äººï¼ˆå˜é‡çŠ¶æ€ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logSuspect</span><span class="params">(String suspectName, Object value)</span> &#123;</span><br><span class="line">        logger.debug(<span class="string">&quot;ğŸ‘¤ å«Œç–‘äºº[&#123;&#125;]çŠ¶æ€: &#123;&#125;&quot;</span>, suspectName, value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®°å½•å…³é”®è¯æ®ï¼ˆé‡è¦æ•°æ®ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logEvidence</span><span class="params">(String evidenceName, Object evidence)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;ğŸ” å…³é”®è¯æ®[&#123;&#125;]: &#123;&#125;&quot;</span>, evidenceName, evidence);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®°å½•æ¡ˆä»¶çªç ´ï¼ˆå¼‚å¸¸æ•è·ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logBreakthrough</span><span class="params">(String caseId, String breakthrough)</span> &#123;</span><br><span class="line">        logger.warn(<span class="string">&quot;ğŸ’¡ æ¡ˆä»¶[&#123;&#125;]çªç ´: &#123;&#125;&quot;</span>, caseId, breakthrough);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®°å½•æ¡ˆä»¶è§£å†³ï¼ˆé—®é¢˜ä¿®å¤ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logCaseSolved</span><span class="params">(String caseId, String solution)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;âœ… æ¡ˆä»¶[&#123;&#125;]å·²è§£å†³: &#123;&#125;&quot;</span>, caseId, solution);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3><span id="æ–­ç‚¹è°ƒè¯•çš„ç°åœºå‹˜æŸ¥">æ–­ç‚¹è°ƒè¯•çš„â€ç°åœºå‹˜æŸ¥â€</span></h3><p>å°wicå¸¦é¢†å¼ å­çƒ¨æ¥åˆ°â€ç°åœºå‹˜æŸ¥å®¤â€ï¼Œè¿™é‡Œå¸ƒæ»¡äº†å„ç§è°ƒè¯•å·¥å…·å’Œç›‘æ§è®¾å¤‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾¦æ¢æ–­ç‚¹å·¥å…·ç±»</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DetectiveBreakpoint</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®¾ç½®è§‚å¯Ÿç‚¹ï¼ˆæ¡ä»¶æ–­ç‚¹ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setObservationPoint</span><span class="params">(String caseId, String condition)</span> &#123;</span><br><span class="line">        <span class="comment">// åœ¨å®é™…IDEä¸­ï¼Œè¿™å¯¹åº”è®¾ç½®æ¡ä»¶æ–­ç‚¹</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸ”­ è®¾ç½®è§‚å¯Ÿç‚¹[&#123;&#125;]: å½“æ¡ä»¶&#x27;&#123;&#125;&#x27;æ»¡è¶³æ—¶æš‚åœ&quot;</span>, caseId, condition);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å•æ­¥è·Ÿè¸ªï¼ˆStep Intoï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stepIntoInvestigation</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸ‘£ è¿›å…¥æ–¹æ³•å†…éƒ¨ï¼Œæ·±å…¥è°ƒæŸ¥...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿‡ç¨‹è·Ÿè¸ªï¼ˆStep Overï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stepOverInvestigation</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸš¶ è·³è¿‡å½“å‰æ–¹æ³•ï¼Œç»§ç»­å¤–éƒ¨è°ƒæŸ¥...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¿«é€Ÿè°ƒæŸ¥ï¼ˆStep Outï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stepOutInvestigation</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸƒ å¿«é€Ÿé€€å‡ºå½“å‰æ–¹æ³•ï¼Œè¿”å›è°ƒç”¨æ–¹...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å˜é‡ç›‘è§†ï¼ˆWatchï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">watchVariable</span><span class="params">(String variableName, Object value)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸ‘€ ç›‘è§†å˜é‡[&#123;&#125;]: &#123;&#125;&quot;</span>, variableName, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ˆä»¶è°ƒæŸ¥æ§åˆ¶å™¨</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/detective&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CaseInvestigationController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DetectiveLogger detectiveLogger;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DetectiveBreakpoint detectiveBreakpoint;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¼€å§‹æ¡ˆä»¶è°ƒæŸ¥</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/start-case/&#123;caseId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">startCaseInvestigation</span><span class="params">(<span class="meta">@PathVariable</span> String caseId)</span> &#123;</span><br><span class="line">        detectiveLogger.logCrimeScene(<span class="string">&quot;startCaseInvestigation&quot;</span>, caseId);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®¾ç½®è§‚å¯Ÿç‚¹</span></span><br><span class="line">        detectiveBreakpoint.setObservationPoint(caseId, <span class="string">&quot;å¼‚å¸¸å‘ç”Ÿæ—¶åˆ»&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(<span class="string">&quot;æ¡ˆä»¶[&#123;&quot;</span> + caseId + <span class="string">&quot;&#125;]è°ƒæŸ¥å·²å¼€å§‹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ†ææ¡ˆä»¶çº¿ç´¢</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/analyze-clues/&#123;caseId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;List&lt;String&gt;&gt; <span class="title function_">analyzeCaseClues</span><span class="params">(<span class="meta">@PathVariable</span> String caseId)</span> &#123;</span><br><span class="line">        detectiveLogger.logCrimeScene(<span class="string">&quot;analyzeCaseClues&quot;</span>, caseId);</span><br><span class="line">        </span><br><span class="line">        List&lt;String&gt; clues = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å•æ­¥è·Ÿè¸ªè°ƒæŸ¥</span></span><br><span class="line">        detectiveBreakpoint.stepIntoInvestigation();</span><br><span class="line">        clues.add(<span class="string">&quot;è¿›å…¥æ–¹æ³•å†…éƒ¨è°ƒæŸ¥&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç›‘è§†å…³é”®å˜é‡</span></span><br><span class="line">        detectiveBreakpoint.watchVariable(<span class="string">&quot;å¼‚å¸¸å †æ ˆ&quot;</span>, getExceptionStackTrace(caseId));</span><br><span class="line">        clues.add(<span class="string">&quot;ç›‘è§†å¼‚å¸¸å †æ ˆä¿¡æ¯&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        detectiveLogger.logEvidence(<span class="string">&quot;æ¡ˆä»¶çº¿ç´¢&quot;</span>, clues);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(clues);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">getExceptionStackTrace</span><span class="params">(String caseId)</span> &#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿè·å–å¼‚å¸¸å †æ ˆ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;java.lang.NullPointerException: å‘˜å·¥ä¿¡æ¯ä¸ºç©º at EmployeeService.getEmployeeInfo()&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="é«˜çº§è°ƒè¯•æŠ€å·§bugè¿½è¸ªçš„ä¾¦æ¢æ‰‹æ³•">é«˜çº§è°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ‰‹æ³•</span></h2><h3><span id="å¼‚å¸¸åˆ†æçš„çŠ¯ç½ªç°åœºé‡å»º">å¼‚å¸¸åˆ†æçš„â€çŠ¯ç½ªç°åœºé‡å»ºâ€</span></h3><p>å¼ å­çƒ¨é¢å¯¹ä¸€ä¸ªå¤æ‚çš„NullPointerExceptionï¼Œå¼€å§‹å­¦ä¹ å¼‚å¸¸åˆ†æçš„æŠ€å·§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼‚å¸¸åˆ†æå·¥å…·ç±» - çŠ¯ç½ªç°åœºé‡å»ºä¸“å®¶</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CrimeSceneReconstructor</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(CrimeSceneReconstructor.class);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é‡å»ºçŠ¯ç½ªç°åœºï¼ˆå¼‚å¸¸åˆ†æï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> CrimeSceneReport <span class="title function_">reconstructCrimeScene</span><span class="params">(Exception crime)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;ğŸ”¬ å¼€å§‹é‡å»ºçŠ¯ç½ªç°åœº...&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">CrimeSceneReport</span> <span class="variable">report</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CrimeSceneReport</span>();</span><br><span class="line">        report.setCrimeType(crime.getClass().getSimpleName());</span><br><span class="line">        report.setCrimeMessage(crime.getMessage());</span><br><span class="line">        report.setStackTrace(Arrays.toString(crime.getStackTrace()));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ†æçŠ¯ç½ªåŠ¨æœºï¼ˆå¼‚å¸¸åŸå› ï¼‰</span></span><br><span class="line">        analyzeCrimeMotive(report, crime);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç¡®å®šçŠ¯ç½ªæ—¶é—´ï¼ˆå¼‚å¸¸å‘ç”Ÿæ—¶åˆ»ï¼‰</span></span><br><span class="line">        report.setCrimeTime(LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        logger.info(<span class="string">&quot;ğŸ“‹ çŠ¯ç½ªç°åœºé‡å»ºå®Œæˆ: &#123;&#125;&quot;</span>, report);</span><br><span class="line">        <span class="keyword">return</span> report;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ†æçŠ¯ç½ªåŠ¨æœº</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">analyzeCrimeMotive</span><span class="params">(CrimeSceneReport report, Exception crime)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (crime <span class="keyword">instanceof</span> NullPointerException) &#123;</span><br><span class="line">            report.setMotive(<span class="string">&quot;ç©ºæŒ‡é’ˆå¼‚å¸¸ - å¯¹è±¡æœªåˆå§‹åŒ–&quot;</span>);</span><br><span class="line">            report.setSolution(<span class="string">&quot;æ£€æŸ¥å¯¹è±¡åˆå§‹åŒ–ï¼Œæ·»åŠ ç©ºå€¼åˆ¤æ–­&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (crime <span class="keyword">instanceof</span> IllegalArgumentException) &#123;</span><br><span class="line">            report.setMotive(<span class="string">&quot;å‚æ•°å¼‚å¸¸ - ä¼ å…¥å‚æ•°ä¸åˆæ³•&quot;</span>);</span><br><span class="line">            report.setSolution(<span class="string">&quot;éªŒè¯å‚æ•°æœ‰æ•ˆæ€§ï¼Œæ·»åŠ å‚æ•°æ ¡éªŒ&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (crime <span class="keyword">instanceof</span> SQLException) &#123;</span><br><span class="line">            report.setMotive(<span class="string">&quot;æ•°æ®åº“å¼‚å¸¸ - SQLæ‰§è¡Œé”™è¯¯&quot;</span>);</span><br><span class="line">            report.setSolution(<span class="string">&quot;æ£€æŸ¥SQLè¯­å¥ï¼ŒéªŒè¯æ•°æ®åº“è¿æ¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çŠ¯ç½ªç°åœºæŠ¥å‘Š</span></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">CrimeSceneReport</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String crimeType;          <span class="comment">// å¼‚å¸¸ç±»å‹</span></span><br><span class="line">        <span class="keyword">private</span> String crimeMessage;       <span class="comment">// å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">private</span> String stackTrace;         <span class="comment">// å †æ ˆè·Ÿè¸ª</span></span><br><span class="line">        <span class="keyword">private</span> String motive;             <span class="comment">// å¼‚å¸¸åŸå› </span></span><br><span class="line">        <span class="keyword">private</span> String solution;           <span class="comment">// è§£å†³æ–¹æ¡ˆ</span></span><br><span class="line">        <span class="keyword">private</span> LocalDateTime crimeTime;   <span class="comment">// å‘ç”Ÿæ—¶é—´</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚å¸¸è¿½è¸ªæœåŠ¡</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExceptionTrackerService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CrimeSceneReconstructor reconstructor;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿½è¸ªå¼‚å¸¸å¹¶ç”ŸæˆæŠ¥å‘Š</span></span><br><span class="line">    <span class="keyword">public</span> ExceptionTrackingReport <span class="title function_">trackException</span><span class="params">(String caseId, Exception exception)</span> &#123;</span><br><span class="line">        CrimeSceneReconstructor.<span class="type">CrimeSceneReport</span> <span class="variable">crimeReport</span> <span class="operator">=</span> </span><br><span class="line">            reconstructor.reconstructCrimeScene(exception);</span><br><span class="line">        </span><br><span class="line">        <span class="type">ExceptionTrackingReport</span> <span class="variable">trackingReport</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ExceptionTrackingReport</span>();</span><br><span class="line">        trackingReport.setCaseId(caseId);</span><br><span class="line">        trackingReport.setCrimeScene(crimeReport);</span><br><span class="line">        trackingReport.setTrackingStatus(<span class="string">&quot;è°ƒæŸ¥ä¸­&quot;</span>);</span><br><span class="line">        trackingReport.setInvestigator(<span class="string">&quot;å¼ å­çƒ¨&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®°å½•è°ƒæŸ¥è¿‡ç¨‹</span></span><br><span class="line">        logInvestigationProcess(trackingReport);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> trackingReport;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®°å½•è°ƒæŸ¥è¿‡ç¨‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">logInvestigationProcess</span><span class="params">(ExceptionTrackingReport report)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸ“ å¼‚å¸¸è¿½è¸ªæŠ¥å‘Š:&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¡ˆä»¶ID: &quot;</span> + report.getCaseId());</span><br><span class="line">        System.out.println(<span class="string">&quot;å¼‚å¸¸ç±»å‹: &quot;</span> + report.getCrimeScene().getCrimeType());</span><br><span class="line">        System.out.println(<span class="string">&quot;å¼‚å¸¸åŸå› : &quot;</span> + report.getCrimeScene().getMotive());</span><br><span class="line">        System.out.println(<span class="string">&quot;è§£å†³æ–¹æ¡ˆ: &quot;</span> + report.getCrimeScene().getSolution());</span><br><span class="line">        System.out.println(<span class="string">&quot;è°ƒæŸ¥å‘˜: &quot;</span> + report.getInvestigator());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ExceptionTrackingReport</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String caseId;</span><br><span class="line">        <span class="keyword">private</span> CrimeSceneReconstructor.CrimeSceneReport crimeScene;</span><br><span class="line">        <span class="keyword">private</span> String trackingStatus;</span><br><span class="line">        <span class="keyword">private</span> String investigator;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">LocalDateTime</span> <span class="variable">startTime</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime endTime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3><span id="æ€§èƒ½åˆ†æçš„æ—¶é—´çº¿è°ƒæŸ¥">æ€§èƒ½åˆ†æçš„â€æ—¶é—´çº¿è°ƒæŸ¥â€</span></h3><p>å¼ å­çƒ¨å‘ç°ç³»ç»Ÿå­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œå¼€å§‹å­¦ä¹ æ€§èƒ½åˆ†æå’Œä¼˜åŒ–çš„æŠ€å·§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ€§èƒ½åˆ†æå·¥å…·ç±» - æ—¶é—´çº¿è°ƒæŸ¥ä¸“å®¶</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimelineInvestigator</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(TimelineInvestigator.class);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¼€å§‹æ—¶é—´çº¿è°ƒæŸ¥</span></span><br><span class="line">    <span class="keyword">public</span> TimelineReport <span class="title function_">startTimelineInvestigation</span><span class="params">(String caseId)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;â±ï¸ å¼€å§‹æ—¶é—´çº¿è°ƒæŸ¥[&#123;&#125;]...&quot;</span>, caseId);</span><br><span class="line">        </span><br><span class="line">        <span class="type">TimelineReport</span> <span class="variable">report</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TimelineReport</span>();</span><br><span class="line">        report.setCaseId(caseId);</span><br><span class="line">        report.setStartTime(System.currentTimeMillis());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> report;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®°å½•æ—¶é—´ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">recordTimePoint</span><span class="params">(TimelineReport report, String eventName)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">currentTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">long</span> <span class="variable">elapsed</span> <span class="operator">=</span> currentTime - report.getStartTime();</span><br><span class="line">        </span><br><span class="line">        <span class="type">TimePoint</span> <span class="variable">timePoint</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TimePoint</span>();</span><br><span class="line">        timePoint.setEventName(eventName);</span><br><span class="line">        timePoint.setTimestamp(currentTime);</span><br><span class="line">        timePoint.setElapsedTime(elapsed);</span><br><span class="line">        </span><br><span class="line">        report.getTimePoints().add(timePoint);</span><br><span class="line">        logger.debug(<span class="string">&quot;ğŸ“Œ è®°å½•æ—¶é—´ç‚¹[&#123;&#125;]: &#123;&#125;ms&quot;</span>, eventName, elapsed);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ†ææ€§èƒ½ç“¶é¢ˆ</span></span><br><span class="line">    <span class="keyword">public</span> PerformanceBottleneck <span class="title function_">analyzeBottleneck</span><span class="params">(TimelineReport report)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;ğŸ” åˆ†ææ€§èƒ½ç“¶é¢ˆ...&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">PerformanceBottleneck</span> <span class="variable">bottleneck</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PerformanceBottleneck</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®¡ç®—å„é˜¶æ®µè€—æ—¶</span></span><br><span class="line">        Map&lt;String, Long&gt; stageDurations = calculateStageDurations(report);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ‰¾å‡ºè€—æ—¶æœ€é•¿çš„é˜¶æ®µ</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">slowestStage</span> <span class="operator">=</span> findSlowestStage(stageDurations);</span><br><span class="line">        <span class="type">long</span> <span class="variable">slowestDuration</span> <span class="operator">=</span> stageDurations.get(slowestStage);</span><br><span class="line">        </span><br><span class="line">        bottleneck.setBottleneckStage(slowestStage);</span><br><span class="line">        bottleneck.setDuration(slowestDuration);</span><br><span class="line">        bottleneck.setSeverity(calculateSeverity(slowestDuration));</span><br><span class="line">        </span><br><span class="line">        logger.info(<span class="string">&quot;âš ï¸ å‘ç°æ€§èƒ½ç“¶é¢ˆ: &#123;&#125; - &#123;&#125;ms (&#123;&#125;)&quot;</span>, </span><br><span class="line">                   slowestStage, slowestDuration, bottleneck.getSeverity());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> bottleneck;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ—¶é—´çº¿æŠ¥å‘Š</span></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">TimelineReport</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String caseId;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">long</span> startTime;</span><br><span class="line">        <span class="keyword">private</span> List&lt;TimePoint&gt; timePoints = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">TimePoint</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String eventName;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">long</span> timestamp;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">long</span> elapsedTime;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">PerformanceBottleneck</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String bottleneckStage;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">long</span> duration;</span><br><span class="line">        <span class="keyword">private</span> String severity; <span class="comment">// LOW, MEDIUM, HIGH, CRITICAL</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ€§èƒ½ç›‘æ§æœåŠ¡</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PerformanceMonitorService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TimelineInvestigator investigator;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç›‘æ§æ–¹æ³•æ€§èƒ½</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T <span class="title function_">monitorPerformance</span><span class="params">(String caseId, String methodName, Supplier&lt;T&gt; task)</span> &#123;</span><br><span class="line">        TimelineInvestigator.<span class="type">TimelineReport</span> <span class="variable">report</span> <span class="operator">=</span> </span><br><span class="line">            investigator.startTimelineInvestigation(caseId);</span><br><span class="line">        </span><br><span class="line">        investigator.recordTimePoint(report, <span class="string">&quot;å¼€å§‹æ‰§è¡Œ: &quot;</span> + methodName);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">T</span> <span class="variable">result</span> <span class="operator">=</span> task.get();</span><br><span class="line">            investigator.recordTimePoint(report, <span class="string">&quot;æ‰§è¡Œå®Œæˆ: &quot;</span> + methodName);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// åˆ†ææ€§èƒ½</span></span><br><span class="line">            TimelineInvestigator.<span class="type">PerformanceBottleneck</span> <span class="variable">bottleneck</span> <span class="operator">=</span> </span><br><span class="line">                investigator.analyzeBottleneck(report);</span><br><span class="line">            </span><br><span class="line">            logPerformanceReport(methodName, bottleneck);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            investigator.recordTimePoint(report, <span class="string">&quot;æ‰§è¡Œå¼‚å¸¸: &quot;</span> + methodName);</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">logPerformanceReport</span><span class="params">(String methodName, </span></span><br><span class="line"><span class="params">                                     TimelineInvestigator.PerformanceBottleneck bottleneck)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸ“Š æ€§èƒ½ç›‘æ§æŠ¥å‘Š:&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•: &quot;</span> + methodName);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç“¶é¢ˆé˜¶æ®µ: &quot;</span> + bottleneck.getBottleneckStage());</span><br><span class="line">        System.out.println(<span class="string">&quot;è€—æ—¶: &quot;</span> + bottleneck.getDuration() + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸¥é‡ç¨‹åº¦: &quot;</span> + bottleneck.getSeverity());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="å®æˆ˜æ¼”ç»ƒbugè¿½è¸ªä¾¦æ¢æ¸¸æˆ">å®æˆ˜æ¼”ç»ƒï¼šBugè¿½è¸ªä¾¦æ¢æ¸¸æˆ</span></h2><h3><span id="æ¡ˆä»¶ä¸€ç¥ç§˜çš„nullpointerexception">æ¡ˆä»¶ä¸€ï¼šç¥ç§˜çš„NullPointerException</span></h3><p>å¼ å­çƒ¨æ¥åˆ°ç¬¬ä¸€ä¸ªæ¡ˆä»¶â€”â€”å‘˜å·¥ä¿¡æ¯æŸ¥è¯¢æ—¶å‡ºç°çš„NullPointerExceptionã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¡ˆä»¶ä¸€ï¼šNullPointerExceptionè°ƒæŸ¥</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CaseOneInvestigation</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DetectiveLogger detectiveLogger;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CrimeSceneReconstructor reconstructor;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è°ƒæŸ¥NullPointerExceptionæ¡ˆä»¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">investigateNullPointerCase</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">caseId</span> <span class="operator">=</span> <span class="string">&quot;CASE-001-NPE&quot;</span>;</span><br><span class="line">        detectiveLogger.logCrimeScene(<span class="string">&quot;investigateNullPointerCase&quot;</span>, caseId);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ¨¡æ‹Ÿæœ‰é—®é¢˜çš„ä»£ç </span></span><br><span class="line">            <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> getEmployeeById(<span class="literal">null</span>);</span><br><span class="line">            detectiveLogger.logSuspect(<span class="string">&quot;employeeå¯¹è±¡&quot;</span>, employee);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (NullPointerException npe) &#123;</span><br><span class="line">            <span class="comment">// é‡å»ºçŠ¯ç½ªç°åœº</span></span><br><span class="line">            CrimeSceneReconstructor.<span class="type">CrimeSceneReport</span> <span class="variable">report</span> <span class="operator">=</span> </span><br><span class="line">                reconstructor.reconstructCrimeScene(npe);</span><br><span class="line">            </span><br><span class="line">            detectiveLogger.logBreakthrough(caseId, </span><br><span class="line">                <span class="string">&quot;å‘ç°NullPointerExceptionï¼ŒåŸå› : &quot;</span> + report.getMotive());</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// æä¾›è§£å†³æ–¹æ¡ˆ</span></span><br><span class="line">            provideSolution(caseId, report);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æœ‰é—®é¢˜çš„å‘˜å·¥æŸ¥è¯¢æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">private</span> Employee <span class="title function_">getEmployeeById</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œæ²¡æœ‰è¿›è¡Œç©ºå€¼æ£€æŸ¥ï¼Œä¼šå¯¼è‡´NullPointerException</span></span><br><span class="line">        <span class="keyword">return</span> employeeRepository.findById(id).orElse(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¿®å¤åçš„å‘˜å·¥æŸ¥è¯¢æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">private</span> Employee <span class="title function_">getEmployeeByIdFixed</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        detectiveLogger.logCrimeScene(<span class="string">&quot;getEmployeeByIdFixed&quot;</span>, id);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (id == <span class="literal">null</span>) &#123;</span><br><span class="line">            detectiveLogger.logEvidence(<span class="string">&quot;å‚æ•°éªŒè¯&quot;</span>, <span class="string">&quot;IDä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;å‘˜å·¥IDä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> employeeRepository.findById(id)</span><br><span class="line">            .orElseThrow(() -&gt; <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;å‘˜å·¥ä¸å­˜åœ¨: &quot;</span> + id));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">provideSolution</span><span class="params">(String caseId, CrimeSceneReconstructor.CrimeSceneReport report)</span> &#123;</span><br><span class="line">        detectiveLogger.logCaseSolved(caseId, report.getSolution());</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸ’¡ æ¡ˆä»¶è§£å†³æ–¹æ¡ˆ:&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;1. åœ¨æ–¹æ³•å…¥å£æ·»åŠ å‚æ•°éªŒè¯&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;2. ä½¿ç”¨Optionalé¿å…ç©ºæŒ‡é’ˆ&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;3. æä¾›æœ‰æ„ä¹‰çš„å¼‚å¸¸ä¿¡æ¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeRepository employeeRepository;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3><span id="æ¡ˆä»¶äºŒæ€§èƒ½ç“¶é¢ˆçš„ç¥ç§˜æ¡ˆä»¶">æ¡ˆä»¶äºŒï¼šæ€§èƒ½ç“¶é¢ˆçš„ç¥ç§˜æ¡ˆä»¶</span></h3><p>å¼ å­çƒ¨å‘ç°å‘˜å·¥åˆ—è¡¨æŸ¥è¯¢æ€§èƒ½ç¼“æ…¢ï¼Œå¼€å§‹è°ƒæŸ¥æ€§èƒ½ç“¶é¢ˆã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¡ˆä»¶äºŒï¼šæ€§èƒ½ç“¶é¢ˆè°ƒæŸ¥</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CaseTwoInvestigation</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PerformanceMonitorService performanceMonitor;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TimelineInvestigator investigator;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è°ƒæŸ¥æ€§èƒ½ç“¶é¢ˆæ¡ˆä»¶</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">investigatePerformanceCase</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">caseId</span> <span class="operator">=</span> <span class="string">&quot;CASE-002-PERF&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> performanceMonitor.monitorPerformance(caseId, </span><br><span class="line">            <span class="string">&quot;æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥ä¿¡æ¯&quot;</span>, <span class="built_in">this</span>::getAllEmployeesWithBottleneck);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æœ‰æ€§èƒ½é—®é¢˜çš„æŸ¥è¯¢æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Employee&gt; <span class="title function_">getAllEmployeesWithBottleneck</span><span class="params">()</span> &#123;</span><br><span class="line">        TimelineInvestigator.<span class="type">TimelineReport</span> <span class="variable">report</span> <span class="operator">=</span> </span><br><span class="line">            investigator.startTimelineInvestigation(<span class="string">&quot;CASE-002-PERF&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæ€§èƒ½ç“¶é¢ˆ</span></span><br><span class="line">        investigator.recordTimePoint(report, <span class="string">&quot;å¼€å§‹æ•°æ®åº“æŸ¥è¯¢&quot;</span>);</span><br><span class="line">        List&lt;Employee&gt; employees = employeeRepository.findAll(); <span class="comment">// N+1æŸ¥è¯¢é—®é¢˜</span></span><br><span class="line">        </span><br><span class="line">        investigator.recordTimePoint(report, <span class="string">&quot;æ•°æ®åº“æŸ¥è¯¢å®Œæˆ&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿå¤„ç†æ¯ä¸ªå‘˜å·¥çš„é¢å¤–æ“ä½œï¼ˆæ€§èƒ½ç“¶é¢ˆï¼‰</span></span><br><span class="line">        investigator.recordTimePoint(report, <span class="string">&quot;å¼€å§‹å¤„ç†å‘˜å·¥æ•°æ®&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Employee employee : employees) &#123;</span><br><span class="line">            processEmployeeDetails(employee); <span class="comment">// æ¯æ¬¡å¾ªç¯éƒ½è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢</span></span><br><span class="line">        &#125;</span><br><span class="line">        investigator.recordTimePoint(report, <span class="string">&quot;å‘˜å·¥æ•°æ®å¤„ç†å®Œæˆ&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> employees;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¿®å¤åçš„æŸ¥è¯¢æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Employee&gt; <span class="title function_">getAllEmployeesOptimized</span><span class="params">()</span> &#123;</span><br><span class="line">        TimelineInvestigator.<span class="type">TimelineReport</span> <span class="variable">report</span> <span class="operator">=</span> </span><br><span class="line">            investigator.startTimelineInvestigation(<span class="string">&quot;CASE-002-PERF-FIXED&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        investigator.recordTimePoint(report, <span class="string">&quot;å¼€å§‹ä¼˜åŒ–æŸ¥è¯¢&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä½¿ç”¨JOINæŸ¥è¯¢é¿å…N+1é—®é¢˜</span></span><br><span class="line">        List&lt;Employee&gt; employees = employeeRepository.findAllWithDetails();</span><br><span class="line">        investigator.recordTimePoint(report, <span class="string">&quot;ä¼˜åŒ–æŸ¥è¯¢å®Œæˆ&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ‰¹é‡å¤„ç†æ•°æ®</span></span><br><span class="line">        investigator.recordTimePoint(report, <span class="string">&quot;å¼€å§‹æ‰¹é‡å¤„ç†&quot;</span>);</span><br><span class="line">        processEmployeesInBatch(employees);</span><br><span class="line">        investigator.recordTimePoint(report, <span class="string">&quot;æ‰¹é‡å¤„ç†å®Œæˆ&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> employees;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processEmployeeDetails</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿé¢å¤–çš„æ•°æ®åº“æŸ¥è¯¢ï¼ˆæ€§èƒ½ç“¶é¢ˆï¼‰</span></span><br><span class="line">        employee.setDepartment(departmentRepository.findById(employee.getDeptId()).orElse(<span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processEmployeesInBatch</span><span class="params">(List&lt;Employee&gt; employees)</span> &#123;</span><br><span class="line">        <span class="comment">// æ‰¹é‡è·å–éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line">        Set&lt;String&gt; deptIds = employees.stream()</span><br><span class="line">            .map(Employee::getDeptId)</span><br><span class="line">            .collect(Collectors.toSet());</span><br><span class="line">        </span><br><span class="line">        Map&lt;String, Department&gt; departmentMap = departmentRepository.findByIdIn(deptIds)</span><br><span class="line">            .stream()</span><br><span class="line">            .collect(Collectors.toMap(Department::getId, Function.identity()));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ‰¹é‡è®¾ç½®éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line">        employees.forEach(employee -&gt; </span><br><span class="line">            employee.setDepartment(departmentMap.get(employee.getDeptId())));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeRepository employeeRepository;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DepartmentRepository departmentRepository;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="å±æœºåŒ–è§£è°ƒè¯•è¿‡ç¨‹ä¸­çš„æŒ‘æˆ˜ä¸çªç ´">å±æœºåŒ–è§£ï¼šè°ƒè¯•è¿‡ç¨‹ä¸­çš„æŒ‘æˆ˜ä¸çªç ´</span></h2><h3><span id="å¹¶å‘é—®é¢˜çš„å¤šé‡æ—¶é—´çº¿">å¹¶å‘é—®é¢˜çš„â€å¤šé‡æ—¶é—´çº¿â€</span></h3><p>å¼ å­çƒ¨é‡åˆ°äº†æ›´å¤æ‚çš„å¹¶å‘Bugï¼Œéœ€è¦å¤„ç†å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºçš„é—®é¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¹¶å‘è°ƒè¯•å·¥å…·ç±»</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcurrencyDetective</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(ConcurrencyDetective.class);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çº¿ç¨‹å®‰å…¨è°ƒæŸ¥</span></span><br><span class="line">    <span class="keyword">public</span> ThreadSafetyReport <span class="title function_">investigateThreadSafety</span><span class="params">(String caseId, Runnable task)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;ğŸ”€ å¼€å§‹çº¿ç¨‹å®‰å…¨è°ƒæŸ¥[&#123;&#125;]...&quot;</span>, caseId);</span><br><span class="line">        </span><br><span class="line">        <span class="type">ThreadSafetyReport</span> <span class="variable">report</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadSafetyReport</span>();</span><br><span class="line">        report.setCaseId(caseId);</span><br><span class="line">        report.setStartTime(LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿå¤šçº¿ç¨‹ç¯å¢ƒ</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">        List&lt;Future&lt;?&gt;&gt; futures = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">threadId</span> <span class="operator">=</span> i;</span><br><span class="line">            Future&lt;?&gt; future = executor.submit(() -&gt; &#123;</span><br><span class="line">                logger.debug(<span class="string">&quot;çº¿ç¨‹[&#123;&#125;]å¼€å§‹æ‰§è¡Œä»»åŠ¡&quot;</span>, threadId);</span><br><span class="line">                task.run();</span><br><span class="line">                logger.debug(<span class="string">&quot;çº¿ç¨‹[&#123;&#125;]ä»»åŠ¡å®Œæˆ&quot;</span>, threadId);</span><br><span class="line">            &#125;);</span><br><span class="line">            futures.add(future);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ</span></span><br><span class="line">        futures.forEach(future -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                future.get();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                report.getExceptions().add(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        executor.shutdown();</span><br><span class="line">        report.setEndTime(LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        analyzeConcurrencyIssues(report);</span><br><span class="line">        <span class="keyword">return</span> report;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ†æå¹¶å‘é—®é¢˜</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">analyzeConcurrencyIssues</span><span class="params">(ThreadSafetyReport report)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!report.getExceptions().isEmpty()) &#123;</span><br><span class="line">            report.setHasConcurrencyIssues(<span class="literal">true</span>);</span><br><span class="line">            report.setIssueDescription(<span class="string">&quot;æ£€æµ‹åˆ°å¹¶å‘è®¿é—®å¼‚å¸¸&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            report.getExceptions().forEach(e -&gt; </span><br><span class="line">                logger.warn(<span class="string">&quot;âš ï¸ å¹¶å‘å¼‚å¸¸: &#123;&#125; - &#123;&#125;&quot;</span>, e.getClass().getSimpleName(), e.getMessage()));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            report.setHasConcurrencyIssues(<span class="literal">false</span>);</span><br><span class="line">            report.setIssueDescription(<span class="string">&quot;æœªæ£€æµ‹åˆ°å¹¶å‘é—®é¢˜&quot;</span>);</span><br><span class="line">            logger.info(<span class="string">&quot;âœ… çº¿ç¨‹å®‰å…¨éªŒè¯é€šè¿‡&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ThreadSafetyReport</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String caseId;</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime startTime;</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime endTime;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> hasConcurrencyIssues;</span><br><span class="line">        <span class="keyword">private</span> String issueDescription;</span><br><span class="line">        <span class="keyword">private</span> List&lt;Exception&gt; exceptions = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹¶å‘Bugä¿®å¤ç¤ºä¾‹</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcurrencyBugFix</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">sharedCounter</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æœ‰å¹¶å‘é—®é¢˜çš„è®¡æ•°å™¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">incrementCounterUnsafe</span><span class="params">()</span> &#123;</span><br><span class="line">        sharedCounter++; <span class="comment">// éåŸå­æ“ä½œï¼Œå­˜åœ¨å¹¶å‘é—®é¢˜</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¿®å¤åçš„è®¡æ•°å™¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">incrementCounterSafe</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            sharedCounter++; <span class="comment">// ä½¿ç”¨åŒæ­¥ä¿è¯åŸå­æ€§</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä½¿ç”¨AtomicIntegerçš„æ›´ä¼˜æ–¹æ¡ˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">AtomicInteger</span> <span class="variable">atomicCounter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">incrementCounterAtomic</span><span class="params">()</span> &#123;</span><br><span class="line">        atomicCounter.incrementAndGet(); <span class="comment">// åŸå­æ“ä½œï¼Œæ— å¹¶å‘é—®é¢˜</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="æŠ€æœ¯è¦ç‚¹æ€»ç»“">æŠ€æœ¯è¦ç‚¹æ€»ç»“</span></h2><h3><span id="è°ƒè¯•æŠ€å·§çš„æ ¸å¿ƒè¦ç‚¹">è°ƒè¯•æŠ€å·§çš„æ ¸å¿ƒè¦ç‚¹</span></h3><ol>
<li><strong>æ—¥å¿—ç³»ç»Ÿ</strong>ï¼šåˆç†ä½¿ç”¨ä¸åŒçº§åˆ«çš„æ—¥å¿—ï¼Œè®°å½•å…³é”®ä¿¡æ¯</li>
<li><strong>æ–­ç‚¹è°ƒè¯•</strong>ï¼šæŒæ¡æ¡ä»¶æ–­ç‚¹ã€å•æ­¥è·Ÿè¸ªç­‰é«˜çº§è°ƒè¯•æŠ€å·§</li>
<li><strong>å¼‚å¸¸åˆ†æ</strong>ï¼šç†è§£å¼‚å¸¸å †æ ˆï¼Œå¿«é€Ÿå®šä½é—®é¢˜æ ¹æº</li>
<li><strong>æ€§èƒ½åˆ†æ</strong>ï¼šä½¿ç”¨æ€§èƒ½ç›‘æ§å·¥å…·ï¼Œæ‰¾å‡ºç³»ç»Ÿç“¶é¢ˆ</li>
<li><strong>å¹¶å‘è°ƒè¯•</strong>ï¼šå¤„ç†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å¤æ‚é—®é¢˜</li>
</ol>
<h3><span id="bugè¿½è¸ªçš„ä¾¦æ¢æ€ç»´">Bugè¿½è¸ªçš„ä¾¦æ¢æ€ç»´</span></h3><ol>
<li><strong>æ”¶é›†çº¿ç´¢</strong>ï¼šé€šè¿‡æ—¥å¿—ã€å¼‚å¸¸ä¿¡æ¯æ”¶é›†Bugç›¸å…³æ•°æ®</li>
<li><strong>åˆ†æåŠ¨æœº</strong>ï¼šç†è§£Bugäº§ç”Ÿçš„åŸå› å’ŒèƒŒæ™¯</li>
<li><strong>é‡å»ºç°åœº</strong>ï¼šå¤ç°é—®é¢˜åœºæ™¯ï¼ŒéªŒè¯å‡è®¾</li>
<li><strong>åˆ¶å®šæ–¹æ¡ˆ</strong>ï¼šæ ¹æ®åˆ†æç»“æœåˆ¶å®šä¿®å¤ç­–ç•¥</li>
<li><strong>éªŒè¯æ•ˆæœ</strong>ï¼šç¡®ä¿ä¿®å¤æ–¹æ¡ˆæœ‰æ•ˆä¸”æ— å‰¯ä½œç”¨</li>
</ol>
<h2><span id="æˆé•¿æ”¶è·">æˆé•¿æ”¶è·</span></h2><h3><span id="æŠ€æœ¯èƒ½åŠ›é‡Œç¨‹ç¢‘">æŠ€æœ¯èƒ½åŠ›é‡Œç¨‹ç¢‘</span></h3><p>å¼ å­çƒ¨é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼ŒæŒæ¡äº†ï¼š</p>
<ul>
<li>ç³»ç»ŸåŒ–çš„è°ƒè¯•æ–¹æ³•å’Œå·¥å…·ä½¿ç”¨</li>
<li>å¤æ‚Bugçš„åˆ†æå’Œè§£å†³èƒ½åŠ›</li>
<li>æ€§èƒ½ä¼˜åŒ–å’Œå¹¶å‘å¤„ç†æŠ€å·§</li>
<li>é—®é¢˜é¢„é˜²å’Œä»£ç è´¨é‡æ„è¯†</li>
</ul>
<h3><span id="èŒä¸šå‘å±•å¯ç¤º">èŒä¸šå‘å±•å¯ç¤º</span></h3><ol>
<li><strong>é—®é¢˜è§£å†³èƒ½åŠ›</strong>ï¼šä»è¢«åŠ¨æ¥å—Bugåˆ°ä¸»åŠ¨é¢„é˜²é—®é¢˜</li>
<li><strong>ç³»ç»Ÿæ€ç»´</strong>ï¼šä»å±€éƒ¨è°ƒè¯•åˆ°å…¨å±€æ€§èƒ½ä¼˜åŒ–</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šä¸å›¢é˜Ÿæˆå‘˜åˆ†äº«è°ƒè¯•ç»éªŒå’ŒæŠ€å·§</li>
<li><strong>è´¨é‡æ„è¯†</strong>ï¼šå°†è°ƒè¯•æ€ç»´èå…¥æ—¥å¸¸å¼€å‘æµç¨‹</li>
</ol>
<h2><span id="ä¸‹ç« é¢„å‘Šç¬¬25ç« é¡¹ç›®ä¸Šçº¿ç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å–œæ‚¦">ä¸‹ç« é¢„å‘Šï¼šç¬¬25ç« ã€Šé¡¹ç›®ä¸Šçº¿ï¼šç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å–œæ‚¦ã€‹</span></h2><p>åœ¨æŒæ¡äº†è°ƒè¯•æŠ€å·§åï¼Œå¼ å­çƒ¨å°†è¿æ¥é¡¹ç›®çš„æœ€ç»ˆé˜¶æ®µâ€”â€”ç³»ç»Ÿä¸Šçº¿ã€‚ä¸‹ä¸€ç« å°†è®²è¿°é¡¹ç›®éƒ¨ç½²ã€ä¸Šçº¿æµç¨‹ã€ç›‘æ§ç»´æŠ¤ç­‰å…³é”®ç¯èŠ‚ï¼Œä»¥åŠå›¢é˜Ÿå®Œæˆç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å–œæ‚¦å’Œæˆå°±æ„Ÿã€‚</p>
<h2><span id="å®æˆ˜æ¼”ç»ƒå›¢é˜Ÿåä½œçš„è°ƒè¯•æŒ‘æˆ˜">å®æˆ˜æ¼”ç»ƒï¼šå›¢é˜Ÿåä½œçš„è°ƒè¯•æŒ‘æˆ˜</span></h2><h3><span id="å›¢é˜Ÿè°ƒè¯•ä¼šè®®é›†ä½“æ™ºæ…§çš„ç¢°æ’">å›¢é˜Ÿè°ƒè¯•ä¼šè®®ï¼šé›†ä½“æ™ºæ…§çš„ç¢°æ’</span></h3><p>å¼ å­çƒ¨ç»„ç»‡å›¢é˜Ÿè¿›è¡Œè°ƒè¯•ä¼šè®®ï¼Œé›†ä½“åˆ†æå¤æ‚çš„ç³»ç»Ÿé—®é¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å›¢é˜Ÿè°ƒè¯•ä¼šè®®æ§åˆ¶å™¨</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/team-debug&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TeamDebugSessionController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DetectiveLogger detectiveLogger;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¼€å§‹å›¢é˜Ÿè°ƒè¯•ä¼šè¯</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/start-session&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;DebugSession&gt; <span class="title function_">startTeamDebugSession</span><span class="params">(<span class="meta">@RequestBody</span> DebugSessionRequest request)</span> &#123;</span><br><span class="line">        detectiveLogger.logCrimeScene(<span class="string">&quot;startTeamDebugSession&quot;</span>, request.getCaseId());</span><br><span class="line">        </span><br><span class="line">        <span class="type">DebugSession</span> <span class="variable">session</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DebugSession</span>();</span><br><span class="line">        session.setSessionId(UUID.randomUUID().toString());</span><br><span class="line">        session.setCaseId(request.getCaseId());</span><br><span class="line">        session.setParticipants(request.getParticipants());</span><br><span class="line">        session.setStartTime(LocalDateTime.now());</span><br><span class="line">        session.setStatus(<span class="string">&quot;è¿›è¡Œä¸­&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®°å½•å›¢é˜Ÿåä½œå¼€å§‹</span></span><br><span class="line">        detectiveLogger.logEvidence(<span class="string">&quot;å›¢é˜Ÿè°ƒè¯•å¼€å§‹&quot;</span>, </span><br><span class="line">            <span class="string">&quot;æ¡ˆä»¶: &quot;</span> + request.getCaseId() + <span class="string">&quot;, å‚ä¸äººå‘˜: &quot;</span> + request.getParticipants());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(session);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æäº¤è°ƒè¯•å‘ç°</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/submit-finding&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">submitDebugFinding</span><span class="params">(<span class="meta">@RequestBody</span> DebugFinding finding)</span> &#123;</span><br><span class="line">        detectiveLogger.logCrimeScene(<span class="string">&quot;submitDebugFinding&quot;</span>, finding.getSessionId());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// éªŒè¯å‘ç°çš„é‡è¦æ€§</span></span><br><span class="line">        <span class="keyword">if</span> (finding.getSeverity().equals(<span class="string">&quot;CRITICAL&quot;</span>)) &#123;</span><br><span class="line">            detectiveLogger.logBreakthrough(finding.getSessionId(), </span><br><span class="line">                <span class="string">&quot;å…³é”®å‘ç°: &quot;</span> + finding.getDescription());</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®°å½•å›¢é˜Ÿæˆå‘˜çš„è´¡çŒ®</span></span><br><span class="line">        detectiveLogger.logEvidence(<span class="string">&quot;å›¢é˜Ÿå‘ç°&quot;</span>, </span><br><span class="line">            finding.getFoundBy() + <span class="string">&quot;å‘ç°: &quot;</span> + finding.getDescription());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(<span class="string">&quot;å‘ç°å·²è®°å½•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å›¢é˜Ÿè°ƒè¯•ä¼šè¯</span></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">DebugSession</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String sessionId;</span><br><span class="line">        <span class="keyword">private</span> String caseId;</span><br><span class="line">        <span class="keyword">private</span> List&lt;String&gt; participants;</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime startTime;</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime endTime;</span><br><span class="line">        <span class="keyword">private</span> String status;</span><br><span class="line">        <span class="keyword">private</span> List&lt;DebugFinding&gt; findings = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">DebugSessionRequest</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String caseId;</span><br><span class="line">        <span class="keyword">private</span> List&lt;String&gt; participants;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">DebugFinding</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String sessionId;</span><br><span class="line">        <span class="keyword">private</span> String description;</span><br><span class="line">        <span class="keyword">private</span> String severity; <span class="comment">// LOW, MEDIUM, HIGH, CRITICAL</span></span><br><span class="line">        <span class="keyword">private</span> String foundBy;</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime foundTime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›¢é˜Ÿåä½œè°ƒè¯•æœåŠ¡</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TeamCollaborationDebugService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DetectiveLogger detectiveLogger;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ†é…è°ƒè¯•ä»»åŠ¡</span></span><br><span class="line">    <span class="keyword">public</span> DebugTask <span class="title function_">assignDebugTask</span><span class="params">(String caseId, String assignee, String taskDescription)</span> &#123;</span><br><span class="line">        detectiveLogger.logCrimeScene(<span class="string">&quot;assignDebugTask&quot;</span>, caseId, assignee, taskDescription);</span><br><span class="line">        </span><br><span class="line">        <span class="type">DebugTask</span> <span class="variable">task</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DebugTask</span>();</span><br><span class="line">        task.setTaskId(UUID.randomUUID().toString());</span><br><span class="line">        task.setCaseId(caseId);</span><br><span class="line">        task.setAssignee(assignee);</span><br><span class="line">        task.setDescription(taskDescription);</span><br><span class="line">        task.setStatus(<span class="string">&quot;å¾…å¤„ç†&quot;</span>);</span><br><span class="line">        task.setCreatedTime(LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        detectiveLogger.logEvidence(<span class="string">&quot;ä»»åŠ¡åˆ†é…&quot;</span>, </span><br><span class="line">            assignee + <span class="string">&quot;è¢«åˆ†é…ä»»åŠ¡: &quot;</span> + taskDescription);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> task;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å®Œæˆä»»åŠ¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">completeDebugTask</span><span class="params">(DebugTask task, String solution)</span> &#123;</span><br><span class="line">        detectiveLogger.logCrimeScene(<span class="string">&quot;completeDebugTask&quot;</span>, task.getTaskId());</span><br><span class="line">        </span><br><span class="line">        task.setStatus(<span class="string">&quot;å·²å®Œæˆ&quot;</span>);</span><br><span class="line">        task.setSolution(solution);</span><br><span class="line">        task.setCompletedTime(LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        detectiveLogger.logCaseSolved(task.getCaseId(), </span><br><span class="line">            <span class="string">&quot;ä»»åŠ¡[&#123;&quot;</span> + task.getTaskId() + <span class="string">&quot;&#125;]å®Œæˆ: &quot;</span> + solution);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">DebugTask</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String taskId;</span><br><span class="line">        <span class="keyword">private</span> String caseId;</span><br><span class="line">        <span class="keyword">private</span> String assignee;</span><br><span class="line">        <span class="keyword">private</span> String description;</span><br><span class="line">        <span class="keyword">private</span> String status;</span><br><span class="line">        <span class="keyword">private</span> String solution;</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime createdTime;</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime completedTime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3><span id="æ¡ˆä»¶ä¸‰åˆ†å¸ƒå¼ç³»ç»Ÿçš„è°ƒè¯•æŒ‘æˆ˜">æ¡ˆä»¶ä¸‰ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„è°ƒè¯•æŒ‘æˆ˜</span></h3><p>å¼ å­çƒ¨é¢å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤æ‚è°ƒè¯•é—®é¢˜ï¼Œéœ€è¦è·¨æœåŠ¡è¿½è¸ªBugã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†å¸ƒå¼è°ƒè¯•è¿½è¸ªå™¨</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DistributedDebugTracer</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(DistributedDebugTracer.class);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¼€å§‹åˆ†å¸ƒå¼è¿½è¸ª</span></span><br><span class="line">    <span class="keyword">public</span> TraceContext <span class="title function_">startDistributedTrace</span><span class="params">(String traceId, String serviceName)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;ğŸŒ å¼€å§‹åˆ†å¸ƒå¼è¿½è¸ª[&#123;&#125;] - æœåŠ¡: &#123;&#125;&quot;</span>, traceId, serviceName);</span><br><span class="line">        </span><br><span class="line">        <span class="type">TraceContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TraceContext</span>();</span><br><span class="line">        context.setTraceId(traceId);</span><br><span class="line">        context.setServiceName(serviceName);</span><br><span class="line">        context.setStartTime(System.currentTimeMillis());</span><br><span class="line">        context.setSpanId(generateSpanId());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®°å½•è¿½è¸ªå¼€å§‹</span></span><br><span class="line">        MDC.put(<span class="string">&quot;traceId&quot;</span>, traceId);</span><br><span class="line">        MDC.put(<span class="string">&quot;spanId&quot;</span>, context.getSpanId());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> context;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®°å½•è·¨æœåŠ¡è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logCrossServiceCall</span><span class="params">(TraceContext context, String targetService, String operation)</span> &#123;</span><br><span class="line">        logger.debug(<span class="string">&quot;ğŸ”— è·¨æœåŠ¡è°ƒç”¨: &#123;&#125; -&gt; &#123;&#125; - &#123;&#125;&quot;</span>, </span><br><span class="line">                    context.getServiceName(), targetService, operation);</span><br><span class="line">        </span><br><span class="line">        <span class="type">CrossServiceCall</span> <span class="variable">call</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CrossServiceCall</span>();</span><br><span class="line">        call.setSourceService(context.getServiceName());</span><br><span class="line">        call.setTargetService(targetService);</span><br><span class="line">        call.setOperation(operation);</span><br><span class="line">        call.setTimestamp(System.currentTimeMillis());</span><br><span class="line">        </span><br><span class="line">        context.getCrossServiceCalls().add(call);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ†æåˆ†å¸ƒå¼è¿½è¸ªç»“æœ</span></span><br><span class="line">    <span class="keyword">public</span> DistributedTraceReport <span class="title function_">analyzeTrace</span><span class="params">(TraceContext context)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;ğŸ“Š åˆ†æåˆ†å¸ƒå¼è¿½è¸ªç»“æœ...&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">DistributedTraceReport</span> <span class="variable">report</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DistributedTraceReport</span>();</span><br><span class="line">        report.setTraceId(context.getTraceId());</span><br><span class="line">        report.setTotalDuration(System.currentTimeMillis() - context.getStartTime());</span><br><span class="line">        report.setServiceCount((<span class="type">int</span>) context.getCrossServiceCalls().stream()</span><br><span class="line">            .map(CrossServiceCall::getTargetService)</span><br><span class="line">            .distinct()</span><br><span class="line">            .count() + <span class="number">1</span>); <span class="comment">// +1 åŒ…å«å½“å‰æœåŠ¡</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆæœåŠ¡</span></span><br><span class="line">        analyzeBottleneckServices(context, report);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> report;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">TraceContext</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String traceId;</span><br><span class="line">        <span class="keyword">private</span> String spanId;</span><br><span class="line">        <span class="keyword">private</span> String serviceName;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">long</span> startTime;</span><br><span class="line">        <span class="keyword">private</span> List&lt;CrossServiceCall&gt; crossServiceCalls = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">CrossServiceCall</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String sourceService;</span><br><span class="line">        <span class="keyword">private</span> String targetService;</span><br><span class="line">        <span class="keyword">private</span> String operation;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">long</span> timestamp;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">DistributedTraceReport</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String traceId;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">long</span> totalDuration;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> serviceCount;</span><br><span class="line">        <span class="keyword">private</span> String bottleneckService;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">long</span> bottleneckDuration;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ†å¸ƒå¼è°ƒè¯•æ¡ˆä¾‹</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DistributedDebugCase</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DistributedDebugTracer tracer;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DetectiveLogger detectiveLogger;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è°ƒæŸ¥åˆ†å¸ƒå¼ç³»ç»ŸBug</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">investigateDistributedBug</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">caseId</span> <span class="operator">=</span> <span class="string">&quot;CASE-003-DISTRIBUTED&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">traceId</span> <span class="operator">=</span> <span class="string">&quot;TRACE-&quot;</span> + System.currentTimeMillis();</span><br><span class="line">        </span><br><span class="line">        detectiveLogger.logCrimeScene(<span class="string">&quot;investigateDistributedBug&quot;</span>, caseId);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¼€å§‹åˆ†å¸ƒå¼è¿½è¸ª</span></span><br><span class="line">        DistributedDebugTracer.<span class="type">TraceContext</span> <span class="variable">context</span> <span class="operator">=</span> </span><br><span class="line">            tracer.startDistributedTrace(traceId, <span class="string">&quot;employee-service&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ¨¡æ‹Ÿè·¨æœåŠ¡è°ƒç”¨</span></span><br><span class="line">            tracer.logCrossServiceCall(context, <span class="string">&quot;department-service&quot;</span>, <span class="string">&quot;æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯&quot;</span>);</span><br><span class="line">            <span class="type">Department</span> <span class="variable">department</span> <span class="operator">=</span> callDepartmentService();</span><br><span class="line">            </span><br><span class="line">            tracer.logCrossServiceCall(context, <span class="string">&quot;salary-service&quot;</span>, <span class="string">&quot;è®¡ç®—è–ªèµ„&quot;</span>);</span><br><span class="line">            <span class="type">SalaryInfo</span> <span class="variable">salary</span> <span class="operator">=</span> callSalaryService();</span><br><span class="line">            </span><br><span class="line">            tracer.logCrossServiceCall(context, <span class="string">&quot;auth-service&quot;</span>, <span class="string">&quot;éªŒè¯æƒé™&quot;</span>);</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">hasPermission</span> <span class="operator">=</span> callAuthService();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å¤„ç†ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">            processEmployeeData(department, salary, hasPermission);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            detectiveLogger.logBreakthrough(caseId, </span><br><span class="line">                <span class="string">&quot;åˆ†å¸ƒå¼è°ƒç”¨å¼‚å¸¸: &quot;</span> + e.getMessage());</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// åˆ†æè¿½è¸ªç»“æœ</span></span><br><span class="line">            DistributedDebugTracer.<span class="type">DistributedTraceReport</span> <span class="variable">report</span> <span class="operator">=</span> </span><br><span class="line">                tracer.analyzeTrace(context);</span><br><span class="line">            </span><br><span class="line">            analyzeDistributedIssue(report, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">analyzeDistributedIssue</span><span class="params">(DistributedDebugTracer.DistributedTraceReport report, </span></span><br><span class="line"><span class="params">                                        Exception exception)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸ” åˆ†å¸ƒå¼é—®é¢˜åˆ†æ:&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿½è¸ªID: &quot;</span> + report.getTraceId());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ€»è€—æ—¶: &quot;</span> + report.getTotalDuration() + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¶‰åŠæœåŠ¡æ•°: &quot;</span> + report.getServiceCount());</span><br><span class="line">        System.out.println(<span class="string">&quot;å¼‚å¸¸ä¿¡æ¯: &quot;</span> + exception.getMessage());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æä¾›è§£å†³æ–¹æ¡ˆ</span></span><br><span class="line">        provideDistributedSolution(report, exception);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">provideDistributedSolution</span><span class="params">(DistributedDebugTracer.DistributedTraceReport report, </span></span><br><span class="line"><span class="params">                                           Exception exception)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸ’¡ åˆ†å¸ƒå¼é—®é¢˜è§£å†³æ–¹æ¡ˆ:&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;1. æ·»åŠ æœåŠ¡é—´è¶…æ—¶è®¾ç½®&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;2. å®ç°æ–­è·¯å™¨æ¨¡å¼&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;3. å¢åŠ é‡è¯•æœºåˆ¶&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;4. å®Œå–„æœåŠ¡ç›‘æ§&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="æŠ€æœ¯è¦ç‚¹æ·±å…¥é«˜çº§è°ƒè¯•ç­–ç•¥">æŠ€æœ¯è¦ç‚¹æ·±å…¥ï¼šé«˜çº§è°ƒè¯•ç­–ç•¥</span></h2><h3><span id="è‡ªåŠ¨åŒ–è°ƒè¯•å·¥å…·å¼€å‘">è‡ªåŠ¨åŒ–è°ƒè¯•å·¥å…·å¼€å‘</span></h3><p>å¼ å­çƒ¨å¼€å‘è‡ªå®šä¹‰è°ƒè¯•å·¥å…·ï¼Œæé«˜è°ƒè¯•æ•ˆç‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªåŠ¨åŒ–è°ƒè¯•å·¥å…·æ¡†æ¶</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutomatedDebugFramework</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(AutomatedDebugFramework.class);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºè°ƒè¯•è§„åˆ™</span></span><br><span class="line">    <span class="keyword">public</span> DebugRule <span class="title function_">createDebugRule</span><span class="params">(String ruleName, String condition, String action)</span> &#123;</span><br><span class="line">        <span class="type">DebugRule</span> <span class="variable">rule</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DebugRule</span>();</span><br><span class="line">        rule.setRuleId(UUID.randomUUID().toString());</span><br><span class="line">        rule.setRuleName(ruleName);</span><br><span class="line">        rule.setCondition(condition);</span><br><span class="line">        rule.setAction(action);</span><br><span class="line">        rule.setEnabled(<span class="literal">true</span>);</span><br><span class="line">        </span><br><span class="line">        logger.info(<span class="string">&quot;ğŸ”§ åˆ›å»ºè°ƒè¯•è§„åˆ™: &#123;&#125; - æ¡ä»¶: &#123;&#125;, åŠ¨ä½œ: &#123;&#125;&quot;</span>, ruleName, condition, action);</span><br><span class="line">        <span class="keyword">return</span> rule;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰§è¡Œè‡ªåŠ¨åŒ–è°ƒè¯•</span></span><br><span class="line">    <span class="keyword">public</span> DebugResult <span class="title function_">executeAutomatedDebug</span><span class="params">(List&lt;DebugRule&gt; rules, Object target)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;ğŸ¤– å¼€å§‹è‡ªåŠ¨åŒ–è°ƒè¯•...&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">DebugResult</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DebugResult</span>();</span><br><span class="line">        result.setStartTime(LocalDateTime.now());</span><br><span class="line">        result.setTarget(target.getClass().getSimpleName());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (DebugRule rule : rules) &#123;</span><br><span class="line">            <span class="keyword">if</span> (rule.isEnabled() &amp;&amp; evaluateCondition(rule.getCondition(), target)) &#123;</span><br><span class="line">                logger.debug(<span class="string">&quot;âœ… è§„åˆ™[&#123;&#125;]æ¡ä»¶æ»¡è¶³ï¼Œæ‰§è¡ŒåŠ¨ä½œ&quot;</span>, rule.getRuleName());</span><br><span class="line">                executeAction(rule.getAction(), target);</span><br><span class="line">                result.getExecutedRules().add(rule);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        result.setEndTime(LocalDateTime.now());</span><br><span class="line">        result.setSuccess(<span class="literal">true</span>);</span><br><span class="line">        </span><br><span class="line">        logger.info(<span class="string">&quot;ğŸ¯ è‡ªåŠ¨åŒ–è°ƒè¯•å®Œæˆï¼Œæ‰§è¡Œè§„åˆ™æ•°: &#123;&#125;&quot;</span>, result.getExecutedRules().size());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">DebugRule</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String ruleId;</span><br><span class="line">        <span class="keyword">private</span> String ruleName;</span><br><span class="line">        <span class="keyword">private</span> String condition;  <span class="comment">// æ¡ä»¶è¡¨è¾¾å¼</span></span><br><span class="line">        <span class="keyword">private</span> String action;     <span class="comment">// æ‰§è¡ŒåŠ¨ä½œ</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> enabled;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">DebugResult</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime startTime;</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime endTime;</span><br><span class="line">        <span class="keyword">private</span> String target;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> success;</span><br><span class="line">        <span class="keyword">private</span> List&lt;DebugRule&gt; executedRules = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™ºèƒ½Bugé¢„æµ‹ç³»ç»Ÿ</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BugPredictionSystem</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DetectiveLogger detectiveLogger;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é¢„æµ‹æ½œåœ¨Bug</span></span><br><span class="line">    <span class="keyword">public</span> BugPrediction <span class="title function_">predictPotentialBugs</span><span class="params">(String codeSnippet)</span> &#123;</span><br><span class="line">        detectiveLogger.logCrimeScene(<span class="string">&quot;predictPotentialBugs&quot;</span>, codeSnippet.substring(<span class="number">0</span>, <span class="number">50</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="type">BugPrediction</span> <span class="variable">prediction</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BugPrediction</span>();</span><br><span class="line">        prediction.setPredictionId(UUID.randomUUID().toString());</span><br><span class="line">        prediction.setCodeSnippet(codeSnippet);</span><br><span class="line">        prediction.setAnalysisTime(LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ†æä»£ç æ¨¡å¼ï¼Œé¢„æµ‹æ½œåœ¨é—®é¢˜</span></span><br><span class="line">        analyzeCodePatterns(codeSnippet, prediction);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> prediction;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">analyzeCodePatterns</span><span class="params">(String code, BugPrediction prediction)</span> &#123;</span><br><span class="line">        <span class="comment">// æ£€æµ‹ç©ºæŒ‡é’ˆé£é™©</span></span><br><span class="line">        <span class="keyword">if</span> (code.contains(<span class="string">&quot;.method()&quot;</span>) &amp;&amp; !code.contains(<span class="string">&quot;if (obj != null)&quot;</span>)) &#123;</span><br><span class="line">            prediction.getPotentialBugs().add(<span class="string">&quot;ç©ºæŒ‡é’ˆé£é™©: æ–¹æ³•è°ƒç”¨å‰æœªè¿›è¡Œç©ºå€¼æ£€æŸ¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ£€æµ‹èµ„æºæ³„æ¼é£é™©</span></span><br><span class="line">        <span class="keyword">if</span> (code.contains(<span class="string">&quot;new &quot;</span>) &amp;&amp; !code.contains(<span class="string">&quot;close()&quot;</span>) &amp;&amp; !code.contains(<span class="string">&quot;try-with-resources&quot;</span>)) &#123;</span><br><span class="line">            prediction.getPotentialBugs().add(<span class="string">&quot;èµ„æºæ³„æ¼é£é™©: æœªæ­£ç¡®å…³é—­èµ„æº&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ£€æµ‹å¹¶å‘é£é™©</span></span><br><span class="line">        <span class="keyword">if</span> (code.contains(<span class="string">&quot;++&quot;</span>) || code.contains(<span class="string">&quot;--&quot;</span>)) &#123;</span><br><span class="line">            prediction.getPotentialBugs().add(<span class="string">&quot;å¹¶å‘é£é™©: éåŸå­æ“ä½œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¸å®‰å…¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        detectiveLogger.logEvidence(<span class="string">&quot;Bugé¢„æµ‹ç»“æœ&quot;</span>, prediction.getPotentialBugs());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">BugPrediction</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String predictionId;</span><br><span class="line">        <span class="keyword">private</span> String codeSnippet;</span><br><span class="line">        <span class="keyword">private</span> LocalDateTime analysisTime;</span><br><span class="line">        <span class="keyword">private</span> List&lt;String&gt; potentialBugs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">private</span> <span class="type">double</span> confidenceScore;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="æˆé•¿æ”¶è·æ‰©å±•">æˆé•¿æ”¶è·æ‰©å±•</span></h2><h3><span id="æŠ€æœ¯èƒ½åŠ›é‡Œç¨‹ç¢‘æ·±åŒ–">æŠ€æœ¯èƒ½åŠ›é‡Œç¨‹ç¢‘æ·±åŒ–</span></h3><p>é€šè¿‡æœ¬ç« çš„æ·±å…¥å­¦ä¹ ï¼Œå¼ å­çƒ¨åœ¨è°ƒè¯•é¢†åŸŸè¾¾åˆ°äº†æ–°çš„é«˜åº¦ï¼š</p>
<ol>
<li><strong>ç³»ç»ŸåŒ–è°ƒè¯•æ€ç»´</strong>ï¼šä»è¢«åŠ¨å“åº”åˆ°ä¸»åŠ¨é¢„é˜²çš„è½¬å˜</li>
<li><strong>å›¢é˜Ÿåä½œèƒ½åŠ›</strong>ï¼šç»„ç»‡æœ‰æ•ˆçš„å›¢é˜Ÿè°ƒè¯•ä¼šè®®å’Œä»»åŠ¡åˆ†é…</li>
<li><strong>åˆ†å¸ƒå¼è°ƒè¯•æŠ€èƒ½</strong>ï¼šæŒæ¡è·¨æœåŠ¡ã€è·¨ç³»ç»Ÿçš„å¤æ‚é—®é¢˜è¿½è¸ª</li>
<li><strong>è‡ªåŠ¨åŒ–å·¥å…·å¼€å‘</strong>ï¼šåˆ›å»ºè‡ªå®šä¹‰è°ƒè¯•å·¥å…·æé«˜æ•ˆç‡</li>
<li><strong>Bugé¢„æµ‹èƒ½åŠ›</strong>ï¼šé€šè¿‡ä»£ç åˆ†ææå‰å‘ç°æ½œåœ¨é—®é¢˜</li>
</ol>
<h3><span id="èŒä¸šå‘å±•å¯ç¤ºæ·±åŒ–">èŒä¸šå‘å±•å¯ç¤ºæ·±åŒ–</span></h3><ol>
<li><strong>è´¨é‡ä¿éšœä¸“å®¶</strong>ï¼šä»ä»£ç å®ç°è€…æˆé•¿ä¸ºè´¨é‡å®ˆæŠ¤è€…</li>
<li><strong>æŠ€æœ¯é¢†å¯¼åŠ›</strong>ï¼šåœ¨å›¢é˜Ÿä¸­å‘æŒ¥è°ƒè¯•æŠ€æœ¯å¼•é¢†ä½œç”¨</li>
<li><strong>ç³»ç»Ÿæ¶æ„æ€ç»´</strong>ï¼šé€šè¿‡è°ƒè¯•ç†è§£ç³»ç»Ÿæ•´ä½“è¿è¡Œæœºåˆ¶</li>
<li><strong>æŒç»­æ”¹è¿›æ„è¯†</strong>ï¼šå°†è°ƒè¯•ç»éªŒè½¬åŒ–ä¸ºæµç¨‹ä¼˜åŒ–</li>
</ol>
<h2><span id="ä¸‹ç« é¢„å‘Šæ·±åŒ–ç¬¬25ç« é¡¹ç›®ä¸Šçº¿ç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å–œæ‚¦">ä¸‹ç« é¢„å‘Šæ·±åŒ–ï¼šç¬¬25ç« ã€Šé¡¹ç›®ä¸Šçº¿ï¼šç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å–œæ‚¦ã€‹</span></h2><p>åœ¨æˆåŠŸæŒæ¡è°ƒè¯•æŠ€å·§åï¼Œå¼ å­çƒ¨å°†è¿æ¥æŠ€æœ¯ç”Ÿæ¶¯çš„é‡è¦é‡Œç¨‹ç¢‘â€”â€”é¡¹ç›®ä¸Šçº¿ã€‚ä¸‹ä¸€ç« å°†æ·±å…¥è®²è¿°ï¼š</p>
<ol>
<li><strong>éƒ¨ç½²ç­–ç•¥</strong>ï¼šè“ç»¿éƒ¨ç½²ã€æ»šåŠ¨æ›´æ–°ç­‰ç°ä»£åŒ–éƒ¨ç½²æ–¹æ¡ˆ</li>
<li><strong>ç›‘æ§ä½“ç³»</strong>ï¼šå»ºç«‹å®Œæ•´çš„ç³»ç»Ÿç›‘æ§å’Œå‘Šè­¦æœºåˆ¶</li>
<li><strong>åº”æ€¥é¢„æ¡ˆ</strong>ï¼šåˆ¶å®šè¯¦ç»†çš„ç”Ÿäº§ç¯å¢ƒé—®é¢˜å¤„ç†æµç¨‹</li>
<li><strong>å›¢é˜Ÿåº†ç¥</strong>ï¼šåˆ†äº«æˆåŠŸä¸Šçº¿çš„å–œæ‚¦å’Œæˆå°±æ„Ÿ</li>
<li><strong>ç»éªŒæ€»ç»“</strong>ï¼šå¤ç›˜æ•´ä¸ªé¡¹ç›®å¼€å‘è¿‡ç¨‹çš„ç»éªŒæ•™è®­</li>
</ol>
<h2><span id="æœ¬ç« æ€»ç»“">æœ¬ç« æ€»ç»“</span></h2><p>ç¬¬24ç« ã€Šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆã€‹é€šè¿‡ç”ŸåŠ¨çš„ä¾¦æ¢æ¯”å–»ï¼Œç³»ç»ŸåŒ–åœ°è®²è§£äº†è°ƒè¯•æŠ€å·§å’ŒBugè¿½è¸ªæ–¹æ³•ã€‚å¼ å­çƒ¨åœ¨ä»£ç ç¥åŸŸçš„è°ƒè¯•ä¾¦æ¢äº‹åŠ¡æ‰€ä¸­ï¼Œä¸ä»…å­¦ä¼šäº†å„ç§è°ƒè¯•å·¥å…·çš„ä½¿ç”¨ï¼Œæ›´é‡è¦çš„æ˜¯åŸ¹å…»äº†å‘ç°é—®é¢˜ã€åˆ†æé—®é¢˜ã€è§£å†³é—®é¢˜çš„ç³»ç»Ÿæ€ç»´ã€‚</p>
<p>ä»åŸºç¡€çš„æ—¥å¿—è®°å½•åˆ°é«˜çº§çš„æ€§èƒ½åˆ†æï¼Œä»ç®€å•çš„NullPointerExceptionåˆ°å¤æ‚çš„å¹¶å‘é—®é¢˜ï¼Œæœ¬ç« è¦†ç›–äº†è°ƒè¯•é¢†åŸŸçš„æ ¸å¿ƒæŠ€èƒ½ã€‚é€šè¿‡å®æˆ˜æ¼”ç»ƒçš„ä¾¦æ¢æ¸¸æˆå½¢å¼ï¼Œè®©æ¯ç‡¥çš„è°ƒè¯•è¿‡ç¨‹å˜å¾—ç”ŸåŠ¨æœ‰è¶£ï¼Œå¸®åŠ©è¯»è€…åœ¨è½»æ¾çš„æ°›å›´ä¸­æŒæ¡é‡è¦çš„è°ƒè¯•æŠ€å·§ã€‚</p>
<p>è°ƒè¯•ä¸ä»…æ˜¯ä¿®å¤Bugçš„æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸€ç§æ€ç»´æ–¹å¼ã€‚é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œå¼ å­çƒ¨å®Œæˆäº†ä»ä»£ç å®ç°è€…åˆ°é—®é¢˜è§£å†³è€…çš„é‡è¦è½¬å˜ï¼Œä¸ºåç»­çš„é¡¹ç›®å¼€å‘å’Œç³»ç»Ÿç»´æŠ¤å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚</p>
<p><strong>æœ¬ç« æŠ€æœ¯æˆé•¿è½¨è¿¹</strong>ï¼š</p>
<ul>
<li>åŸºç¡€è°ƒè¯•æŠ€èƒ½ â†’ é«˜çº§è°ƒè¯•ç­–ç•¥</li>
<li>ä¸ªäººè°ƒè¯•èƒ½åŠ› â†’ å›¢é˜Ÿåä½œè°ƒè¯•</li>
<li>å•ä½“åº”ç”¨è°ƒè¯• â†’ åˆ†å¸ƒå¼ç³»ç»Ÿè°ƒè¯•</li>
<li>è¢«åŠ¨é—®é¢˜å“åº” â†’ ä¸»åŠ¨Bugé¢„æµ‹</li>
<li>æŠ€æœ¯å·¥å…·ä½¿ç”¨ â†’ è°ƒè¯•æ€ç»´åŸ¹å…»</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://example.com">potoior</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://example.com/2025/10/01/%E7%AC%AC24%E7%AB%A0%EF%BC%9A%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%EF%BC%9ABug%E8%BF%BD%E8%B8%AA%E7%9A%84%E4%BE%A6%E6%8E%A2%E6%B8%B8%E6%88%8F/">http://example.com/2025/10/01/%E7%AC%AC24%E7%AB%A0%EF%BC%9A%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%EF%BC%9ABug%E8%BF%BD%E8%B8%AA%E7%9A%84%E4%BE%A6%E6%8E%A2%E6%B8%B8%E6%88%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="http://example.com" target="_blank">potoior</a>ï¼</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/10/01/%E7%AC%AC25%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF%EF%BC%9A%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%87%8C%E7%A8%8B%E7%A2%91%E7%9A%84%E5%96%9C%E6%82%A6/" title="ä»£ç ç¥åŸŸï¼šç¬¬25ç« ï¼šé¡¹ç›®ä¸Šçº¿ï¼šç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å–œæ‚¦"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">ä»£ç ç¥åŸŸï¼šç¬¬25ç« ï¼šé¡¹ç›®ä¸Šçº¿ï¼šç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å–œæ‚¦</div></div><div class="info-2"><div class="info-item-1">ç¬¬25ç« ï¼šé¡¹ç›®ä¸Šçº¿ï¼šç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å–œæ‚¦ç« èŠ‚æ¦‚è¿°å­—æ•°ç»Ÿè®¡ï¼š13,200å­— æ ¸å¿ƒåœºæ™¯ï¼šè¿ªå…‹ç§‘æŠ€å…¬å¸éƒ¨ç½²ä¸­å¿ƒã€ä»£ç ç¥åŸŸçš„ä¸Šçº¿ä»ªå¼æ®¿å ‚ æ ¸å¿ƒå†²çªï¼šé¡¹ç›®ä¸Šçº¿è¿‡ç¨‹ä¸­é‡åˆ°çš„å„ç§æ„å¤–çŠ¶å†µï¼Œå›¢é˜Ÿéœ€è¦åœ¨å‹åŠ›ä¸‹ä¿æŒå†·é™ï¼Œç¡®ä¿ç³»ç»Ÿå¹³ç¨³ä¸Šçº¿ æŠ€æœ¯ä¸»é¢˜ï¼šé¡¹ç›®éƒ¨ç½²ã€ä¸Šçº¿æµç¨‹ã€ç›‘æ§å‘Šè­¦ã€å›¢é˜Ÿåä½œ  1. ä¸Šçº¿å‰çš„ç´§å¼ å‡†å¤‡1.1 éƒ¨ç½²ç¯å¢ƒæ£€æŸ¥å¼ å­çƒ¨ç«™åœ¨è¿ªå…‹ç§‘æŠ€çš„éƒ¨ç½²ä¸­å¿ƒï¼Œé¢å‰çš„å¤§å±å¹•ä¸Šæ˜¾ç¤ºç€å³å°†ä¸Šçº¿çš„å‘˜å·¥ä¿¡æ¯ç®¡ç†ç³»ç»Ÿã€‚ä»–æ·±å¸ä¸€å£æ°”ï¼Œå¼€å§‹æ£€æŸ¥éƒ¨ç½²ç¯å¢ƒã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768// éƒ¨ç½²ç¯å¢ƒæ£€æŸ¥å·¥å…·ç±»@Componentpublic class DeploymentChecker &#123;        @Autowired    private Environment env;        /**     * æ£€æŸ¥æ•°æ®åº“è¿æ¥çŠ¶æ€     */    public boolean c...</div></div></div></a><a class="pagination-related" href="/2025/10/01/%E7%AC%AC23%E7%AB%A0%EF%BC%9A%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0%EF%BC%9A%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E7%9A%84%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B/" title="ä»£ç ç¥åŸŸï¼šç¬¬23ç« ï¼šåŠŸèƒ½å®ç°ï¼šå¢åˆ æ”¹æŸ¥çš„å®Œæ•´æµç¨‹"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">ä»£ç ç¥åŸŸï¼šç¬¬23ç« ï¼šåŠŸèƒ½å®ç°ï¼šå¢åˆ æ”¹æŸ¥çš„å®Œæ•´æµç¨‹</div></div><div class="info-2"><div class="info-item-1">ç¬¬23ç« ï¼šåŠŸèƒ½å®ç°ï¼šå¢åˆ æ”¹æŸ¥çš„å®Œæ•´æµç¨‹ç« èŠ‚æ¦‚è¿°å­—æ•°ç»Ÿè®¡ï¼šçº¦13,800å­— æ ¸å¿ƒåœºæ™¯ï¼šä»£ç ç¥åŸŸçš„åŠŸèƒ½å®ç°æ®¿å ‚ã€å¢åˆ æ”¹æŸ¥é­”æ³•é˜µã€å¼‚å¸¸å¤„ç†ç»“ç•Œ æ ¸å¿ƒå†²çªï¼šæ•°æ®åº“è®¾è®¡ä¸å®é™…åŠŸèƒ½å®ç°ä¹‹é—´çš„æŠ€æœ¯é¸¿æ²Ÿ æŠ€æœ¯è¦ç‚¹ï¼šSpringBootæ¡†æ¶åº”ç”¨ã€MyBatis-Pluså¢åˆ æ”¹æŸ¥ã€ä¸šåŠ¡é€»è¾‘å®ç°ã€å¼‚å¸¸å¤„ç†æœºåˆ¶ æ•…äº‹å¼€ç¯‡ï¼šåŠŸèƒ½å®ç°çš„æŒ‘æˆ˜æ¸…æ™¨çš„é˜³å…‰é€è¿‡åŠå…¬å®¤çš„çª—æˆ·ï¼Œå¼ å­çƒ¨ååœ¨ç”µè„‘å‰ï¼Œé¢å‰æ˜¯ç¬¬22ç« å®Œæˆçš„æ•°æ®åº“è®¾è®¡æ–‡æ¡£ã€‚ä»–æ·±å¸ä¸€å£æ°”ï¼Œå‡†å¤‡å¼€å§‹å°†æ•°æ®åº“è®¾è®¡è½¬åŒ–ä¸ºå®é™…åŠŸèƒ½ã€‚ â€œå°wicï¼Œâ€å¼ å­çƒ¨è½»å£°å‘¼å”¤ï¼Œâ€æ•°æ®åº“è®¾è®¡å·²ç»å®Œæˆï¼Œç°åœ¨è¯¥å®ç°åŠŸèƒ½äº†ã€‚â€ ä»£ç ç¥åŸŸä¸­ï¼Œå°wicçš„èº«å½±ç¼“ç¼“æµ®ç°ï¼šâ€å¾ˆå¥½ï¼Œå¼ å­çƒ¨ã€‚æ•°æ®åº“è®¾è®¡åªæ˜¯åŸºç¡€ï¼ŒçœŸæ­£çš„è€ƒéªŒåœ¨äºåŠŸèƒ½å®ç°ã€‚ä»Šå¤©ï¼Œä½ å°†è¿›å…¥åŠŸèƒ½å®ç°æ®¿å ‚ï¼Œå­¦ä¹ å¢åˆ æ”¹æŸ¥çš„å®Œæ•´æµç¨‹ã€‚â€ éšç€å°wicçš„è¯è¯­ï¼Œå¼ å­çƒ¨çœ¼å‰çš„æ™¯è±¡å¼€å§‹å˜åŒ–ã€‚åŠå…¬å®¤é€æ¸æ¶ˆæ•£ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸€åº§å®ä¼Ÿçš„åŠŸèƒ½å®ç°æ®¿å ‚ã€‚æ®¿å ‚ä¸­å¤®æœ‰å››ä¸ªå·¨å¤§çš„é­”æ³•é˜µï¼Œåˆ†åˆ«æ•£å‘ç€ä¸åŒçš„å…‰èŠ’ï¼š  æŸ¥è¯¢é­”æ³•é˜µï¼šæ•£å‘ç€æ¸©å’Œçš„è“è‰²å…‰èŠ’ æ–°å¢é­”æ³•é˜µï¼šæ•£å‘ç€ç”Ÿæœºå‹ƒå‹ƒçš„ç»¿è‰²å…‰èŠ’   ä¿®æ”¹é­”æ³•é˜µï¼šæ•£å‘ç€æ¸©æš–çš„æ©™è‰²å…‰èŠ’ åˆ é™¤é­”æ³•é˜µï¼šæ•£å‘ç€è°¨æ…çš„çº¢è‰²å…‰èŠ’  â€œè¿™å››å¤§é­”æ³•é˜µï¼Œâ€å°w...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">potoior</div><div class="author-info-description">ä¸€ä½åŠæ ˆå·¥ç¨‹å¸ˆ</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">136</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/potoior"><i class="fab fa-github"></i><span>å‡ºå‘å’¯</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/potoior" target="_blank" title=""><i class="GitHub"></i></a><a class="social-icon" href="mailto:2986486901@qq.com" target="_blank" title=""><i class="Email"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">ç¬¬24ç« ï¼šè°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ¸¸æˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">ç« èŠ‚æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">è°ƒè¯•åŸºç¡€ï¼šBugè¿½è¸ªçš„ä¾¦æ¢å·¥å…·</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">æ—¥å¿—ç³»ç»Ÿçš„â€çº¿ç´¢è®°å½•â€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">æ–­ç‚¹è°ƒè¯•çš„â€ç°åœºå‹˜æŸ¥â€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">é«˜çº§è°ƒè¯•æŠ€å·§ï¼šBugè¿½è¸ªçš„ä¾¦æ¢æ‰‹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">å¼‚å¸¸åˆ†æçš„â€çŠ¯ç½ªç°åœºé‡å»ºâ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">æ€§èƒ½åˆ†æçš„â€æ—¶é—´çº¿è°ƒæŸ¥â€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">å®æˆ˜æ¼”ç»ƒï¼šBugè¿½è¸ªä¾¦æ¢æ¸¸æˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">æ¡ˆä»¶ä¸€ï¼šç¥ç§˜çš„NullPointerException</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">æ¡ˆä»¶äºŒï¼šæ€§èƒ½ç“¶é¢ˆçš„ç¥ç§˜æ¡ˆä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">å±æœºåŒ–è§£ï¼šè°ƒè¯•è¿‡ç¨‹ä¸­çš„æŒ‘æˆ˜ä¸çªç ´</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">å¹¶å‘é—®é¢˜çš„â€å¤šé‡æ—¶é—´çº¿â€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">æŠ€æœ¯è¦ç‚¹æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">è°ƒè¯•æŠ€å·§çš„æ ¸å¿ƒè¦ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">Bugè¿½è¸ªçš„ä¾¦æ¢æ€ç»´</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">æˆé•¿æ”¶è·</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">æŠ€æœ¯èƒ½åŠ›é‡Œç¨‹ç¢‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">èŒä¸šå‘å±•å¯ç¤º</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">ä¸‹ç« é¢„å‘Šï¼šç¬¬25ç« ã€Šé¡¹ç›®ä¸Šçº¿ï¼šç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å–œæ‚¦ã€‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">å®æˆ˜æ¼”ç»ƒï¼šå›¢é˜Ÿåä½œçš„è°ƒè¯•æŒ‘æˆ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">å›¢é˜Ÿè°ƒè¯•ä¼šè®®ï¼šé›†ä½“æ™ºæ…§çš„ç¢°æ’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">æ¡ˆä»¶ä¸‰ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„è°ƒè¯•æŒ‘æˆ˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">æŠ€æœ¯è¦ç‚¹æ·±å…¥ï¼šé«˜çº§è°ƒè¯•ç­–ç•¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">è‡ªåŠ¨åŒ–è°ƒè¯•å·¥å…·å¼€å‘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">æˆé•¿æ”¶è·æ‰©å±•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">æŠ€æœ¯èƒ½åŠ›é‡Œç¨‹ç¢‘æ·±åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">èŒä¸šå‘å±•å¯ç¤ºæ·±åŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">ä¸‹ç« é¢„å‘Šæ·±åŒ–ï¼šç¬¬25ç« ã€Šé¡¹ç›®ä¸Šçº¿ï¼šç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å–œæ‚¦ã€‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">æœ¬ç« æ€»ç»“</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By potoior</span><span class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.0.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.0</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>